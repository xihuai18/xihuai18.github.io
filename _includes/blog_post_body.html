{% assign uv_enabled = include.uv_enabled %}
{% assign uv_has_modes = include.uv_has_modes %}

{% if include.post.external_source == blank %}
  {% assign read_time = include.post.content | number_of_words | divided_by: 180 | plus: 1 %}
{% else %}
  {% assign read_time = include.post.feed_content | strip_html | number_of_words | divided_by: 180 | plus: 1 %}
{% endif %}
{% assign year = include.post.date | date: "%Y" %}
{% assign tags = include.post.tags | join: "" %}
{% assign categories = include.post.categories | join: "" %}

{% if include.post.lang == 'zh' %}
  {% assign label_read_time = "åˆ†é’Ÿé˜…è¯»" %}
  {% assign label_views = "é˜…è¯»" %}
  {% assign date_format = "%Yå¹´%mæœˆ%dæ—¥" %}
{% else %}
  {% assign label_read_time = "min read" %}
  {% assign label_views = "views" %}
  {% assign date_format = "%B %d, %Y" %}
{% endif %}

<h3>
{% if include.post.redirect == blank %}
  <a class="post-title" href="{{ include.post.url | relative_url }}">{{ include.post.title }}</a>
{% elsif include.post.redirect contains '://' %}
  <a class="post-title" href="{{ include.post.redirect }}" target="_blank">{{ include.post.title }}</a>
  <svg width="2rem" height="2rem" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path>
  </svg>
{% else %}
  <a class="post-title" href="{{ include.post.redirect | relative_url }}">{{ include.post.title }}</a>
{% endif %}
</h3>
<p>{{ include.post.description }}</p>
<p class="post-meta">
{{ read_time }} {{ label_read_time }} &nbsp; &middot; &nbsp;
{{ include.post.date | date: date_format }}
{% if include.post.external_source %}
&nbsp; &middot; &nbsp; {{ include.post.external_source }}
{% endif %}
{% if uv_enabled and uv_has_modes > 0 %}
  {% include post_uv.html url=include.post.url %}
  &nbsp; &middot; &nbsp;
  <span class="post-uv" data-uv-all="{{ uv_all }}" data-uv-d30="{{ uv_d30 }}">{{ uv_all }} {{ label_views }}</span>
{% endif %}
</p>
<p class="post-tags">
<a href="{{ '/blog/' | relative_url }}?year={{ year }}" data-filter-link data-filter-type="year" data-filter-value="{{ year }}">
  ğŸ“… {{ year }} </a>

  {% if tags != "" %}
  &nbsp; &middot; &nbsp;
    {% for tag in include.post.tags %}
    <a href="{{ tag | slugify | prepend: '/blog/tag/' | relative_url }}">
      #ï¸âƒ£ {{ tag }}</a>
      {% unless forloop.last %}
        &nbsp;
      {% endunless %}
      {% endfor %}
  {% endif %}

  {% if categories != "" %}
  &nbsp; &middot; &nbsp;
    {% for category in include.post.categories %}
    {% assign category_slug = category | slugify %}
    <a href="{{ '/blog/' | relative_url }}?category={{ category_slug }}" data-filter-link data-filter-type="category" data-filter-value="{{ category_slug }}">
      ğŸ·ï¸ {{ category }}</a>
      {% unless forloop.last %}
        &nbsp;
      {% endunless %}
      {% endfor %}
  {% endif %}
</p>
