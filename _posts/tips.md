# Jekyll + MathJax/KaTeX 公式排版规则

## 基本语法
- 行内公式用 `$...$` 包围
- 行间公式用 `$$...$$` 包围

## 转义规则

### 1. 下划线 `_`
- **行内公式**：复杂公式中需要转义为 `\_`，防止被 Markdown 解析为斜体，一般就是下面这种情况，其他公式中的 `_` 不需要转义：
  - ❌ `$\mathbb{E}_{q}[f]$`
  - ✅ `$\mathbb{E}\_{q}[f]$`
  - ❌ `$\mathbb{E}\_{q}[f_a]$`
  - ✅ `$\mathbb{E}\_{q}[f\_a]$`
- **行间公式 `$$...$$`**：不需要转义，正常写
- **HTML 表格 (`markdown="0"`)**：不需要转义

### 2. 竖线 `|`
- **行内公式**：需要写成 `\lvert X \rvert` 或 `\|`
  - ❌ `$|X|$`
  - ✅ `$\lvert X \rvert$`
- **行间公式**：可以正常使用 `|` 或用 `\lvert \rvert`

### 3. 使用 HTML 表格而非 Markdown 表格
- 为了避免 Markdown 对表格内内容的二次解析，建议使用 HTML 表
- 使用 `<div markdown="0"><table>...</table></div>` 包裹
- 表格内的公式**不需要转义**，因为不经过 Markdown 解析